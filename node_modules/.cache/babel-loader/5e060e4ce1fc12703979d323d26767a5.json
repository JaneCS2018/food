{"ast":null,"code":"import _slicedToArray from\"/Users/janeliu/Desktop/Udemy_Projects/FoodOrder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/janeliu/Desktop/Udemy_Projects/FoodOrder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/janeliu/Desktop/Udemy_Projects/FoodOrder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useReducer}from'react';import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var updatedItems;if(existingCartItem){var updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}return{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var existingItem=state.items[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-existingItem.price;var _updatedItems;if(existingItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartItemIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}return defaultCartState;};var CartProvider=function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartAction({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartAction({type:'REMOVE',id:id});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"sources":["/Users/janeliu/Desktop/Udemy_Projects/FoodOrder/src/store/CartProvider.js"],"names":["useReducer","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","concat","existingItem","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","cartContext","addItem","removeItem","children"],"mappings":"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","sourcesContent":["import { useReducer } from 'react';\nimport CartContext from \"./cart-context\";\n\nconst defaultCartState = {\n    items:[],\n    totalAmount: 0\n}\n\nconst cartReducer =(state, action)=>{\n    if(action.type ==='ADD'){\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n\n        const existingCartItemIndex = state.items.findIndex((item)=>item.id === action.item.id)\n\n        const existingCartItem = state.items[existingCartItemIndex];\n        \n\n        let updatedItems;\n\n        if(existingCartItem){\n            const updatedItem = {\n                ...existingCartItem,\n                amount: existingCartItem.amount + action.item.amount     \n            }\n            updatedItems = [...state.items];\n            updatedItems[existingCartItemIndex] = updatedItem\n        }else{\n            updatedItems = state.items.concat(action.item);\n        }\n\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount,\n        };\n    }\n    if (action.type ==='REMOVE'){\n        const existingCartItemIndex = state.items.findIndex(\n           (item) => item.id===action.id\n      );\n        const existingItem = state.items[existingCartItemIndex];\n        const updatedTotalAmount = state.totalAmount - existingItem.price;\n        let updatedItems;\n        if(existingItem.amount ===1){\n            updatedItems = state.items.filter(item=>item.id !==action.id);\n        }else{\n            const updatedItem = {...existingItem, amount: existingItem.amount -1};\n            updatedItems = [...state.items];\n            updatedItems[existingCartItemIndex] = updatedItem\n        }\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount\n        }\n    }\n    return defaultCartState;\n}\n\nconst CartProvider = (props) => {\n    const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState);\n    const addItemToCartHandler =(item)=>{\n        dispatchCartAction({type: 'ADD', item:item});\n    }\n    const removeItemFromCartHandler =(id)=> {\n        dispatchCartAction({type:'REMOVE', id:id})\n    }\n    const cartContext = {\n        items: cartState.items,\n        totalAmount: cartState.totalAmount,\n        addItem: addItemToCartHandler,\n        removeItem: removeItemFromCartHandler\n    }\n\n    return( \n    <CartContext.Provider value={cartContext}>\n          {props.children} \n        </CartContext.Provider>)\n}\n\nexport default CartProvider;\n"]},"metadata":{},"sourceType":"module"}